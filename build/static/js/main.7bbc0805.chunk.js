(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/points.a0b49deb.png"},52:function(e,t,a){e.exports=a(91)},61:function(e,t,a){},62:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(1),c=a(18),i=a.n(c),u=(a(61),a(4)),o=a(8),s=(a(62),a(10)),m=a.n(s);function p(){var e=Object(l.c)((function(e){return e.userSignin})).userInfo;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"brand"},r.a.createElement("button",{onClick:function(){document.querySelector(".sidebar").classList.add("open")}},"\u2630"),r.a.createElement(u.b,{to:"/"},"Shopping")),r.a.createElement("div",{className:"header-links"},e?r.a.createElement(r.a.Fragment,null,!e.isAdmin&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:m.a,height:"35",width:"35"}),r.a.createElement(u.b,{to:"/cart"},e.points)," "),r.a.createElement(u.b,{to:"/profile"},e.name)):r.a.createElement(u.b,{to:"/signin"},"Sign In"),e&&e.isAdmin&&r.a.createElement("div",{className:"dropdown"},r.a.createElement("a",{href:"#"},"Admin"),r.a.createElement("ul",{className:"dropdown-content"},r.a.createElement("li",null,r.a.createElement(u.b,{to:"/orders"},"Orders"),r.a.createElement(u.b,{to:"/products"},"Products"))))))}var d=a(51);var E=function(e){var t=e.component,a=Object(d.a)(e,["component"]),n=Object(l.c)((function(e){return e.userSignin})).userInfo;return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return("/products"!=e.location.pathname&&"/orders"!=e.location.pathname||n.isAdmin)&&n?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/signin"})}}))},f=a(3),v=a(2),h=a.n(v),y=a(6),g=a(5),S=a.n(g),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var n=Object(y.a)(h.a.mark((function n(r,l){var c,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:"PRODUCT_LIST_REQUEST"}),n.next=4,S.a.get("/api/products?category="+e+"&searchKeyword="+t+"&sortOrder="+a);case 4:c=n.sent,i=c.data,r({type:"PRODUCT_LIST_SUCCESS",payload:i}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r({type:"PRODUCT_LIST_FAIL",payload:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},_=function(){return function(){var e=Object(y.a)(h.a.mark((function e(t,a){var n,r,l,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"PRODUCT_LIST_REQUEST"}),n=a(),r=n.userSignin.userInfo,e.next=5,S.a.get("/api/products/cache",{headers:{authorization:r.token}});case 5:l=e.sent,c=l.data,t({type:"PRODUCT_LIST_SUCCESS",payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:"PRODUCT_LIST_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()};function O(e){return e.value?r.a.createElement("div",{className:"rating"},r.a.createElement("span",null,r.a.createElement("i",{className:e.value>=1?"fa fa-star":e.value>=.5?"fa fa-star-half-o":"fa fa-star-o"})),r.a.createElement("span",null,r.a.createElement("i",{className:e.value>=2?"fa fa-star":e.value>=1.5?"fa fa-star-half-o":"fa fa-star-o"})),r.a.createElement("span",null,r.a.createElement("i",{className:e.value>=3?"fa fa-star":e.value>=2.5?"fa fa-star-half-o":"fa fa-star-o"})),r.a.createElement("span",null,r.a.createElement("i",{className:e.value>=4?"fa fa-star":e.value>=3.5?"fa fa-star-half-o":"fa fa-star-o"})),r.a.createElement("span",null,r.a.createElement("i",{className:e.value>=5?"fa fa-star":e.value>=4.5?"fa fa-star-half-o":"fa fa-star-o"})),r.a.createElement("span",null,e.text?e.text:"")):r.a.createElement("div",null)}var R=a(45),C=a(46),I=a.n(C);var T=function(e){var t=Object(l.c)((function(e){return e.userSignin})).userInfo,a=Object(n.useState)(""),c=Object(f.a)(a,2),i=c[0],o=(c[1],Object(n.useState)("")),s=Object(f.a)(o,2),p=s[0],d=s[1],E=Object(n.useState)([]),v=Object(f.a)(E,2),g=(v[0],v[1],e.match.params.id?e.match.params.id:""),C=Object(l.c)((function(e){return e.productList})),T=C.products,D=C.loading,U=C.error,j=Object(l.b)(),A=Object(l.c)((function(e){return e.topProducts})),N=A.loading,P=A.error,w=A.products;return Object(n.useEffect)((function(){j(function(){var e=Object(y.a)(h.a.mark((function e(t,a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"PRODUCT_LIST_TOP_REQUEST"}),e.next=4,S.a.get("/api/products/topsold");case 4:n=e.sent,r=n.data,t({type:"PRODUCT_LIST_TOP_SUCCESS",payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"PRODUCT_LIST_TOP_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),t&&j(_())}),[]),Object(n.useEffect)((function(){return j(t&&""==g?_():b(g)),function(){}}),[g]),r.a.createElement(r.a.Fragment,null,g&&r.a.createElement("h2",null,g),r.a.createElement("ul",{className:"filter"},r.a.createElement("li",null,r.a.createElement("form",null,r.a.createElement("input",{name:"searchKeyword",onChange:function(e){j(b(g,e.target.value,p))}}))),r.a.createElement("li",null,"Sort By"," ",r.a.createElement("select",{name:"sortOrder",onChange:function(e){d(e.target.value),j(b(g,i,p))}},r.a.createElement("option",{value:"lowest"},"Lowest"),r.a.createElement("option",{value:"highest"},"Highest")))),D?r.a.createElement("div",null,"Loading..."):U?r.a.createElement("div",null,U):r.a.createElement("ul",{className:"products"},T.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",{className:"product"},r.a.createElement(u.b,{to:"/product/"+e._id},r.a.createElement("img",{className:"product-image",src:e.images[0],alt:"product"})),r.a.createElement("div",{className:"product-name"},r.a.createElement(u.b,{to:"/product/"+e._id},e.name)),r.a.createElement("div",{className:"product-brand"},e.brand),r.a.createElement("div",{className:"product-price"},"$",e.price),r.a.createElement("div",{className:"product-price"},r.a.createElement("img",{src:m.a,height:"20",width:"20"}),e.points_price),r.a.createElement("div",{className:"product-rating"},r.a.createElement(O,{value:e.rating,text:e.numReviews+" reviews"}))))}))),P&&r.a.createElement("p",null,"error"),!N&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"filter"},r.a.createElement("h1",null,"10 Best selling Products")),r.a.createElement(R.Carousel,{slides:w.map((function(e){return r.a.createElement(u.b,{to:"/product/"+e._id},r.a.createElement(I.a,{width:500,height:240,src:e.images[0]}))})),autoplay:!0,interval:4e3})))},D=a(20),U=(a(83),a(47)),j=a(48),A=a.n(j);var N=function(e){var t=Object(n.useState)(1),a=Object(f.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(0),s=Object(f.a)(o,2),p=s[0],d=s[1],E=Object(n.useState)(""),v=Object(f.a)(E,2),g=v[0],b=v[1],_=Object(l.c)((function(e){return e.userSignin})).userInfo,R=Object(l.c)((function(e){return e.productDetails})),C=R.product,I=R.loading,T=R.error,j=Object(l.c)((function(e){return e.productReviewSave})).success,N=Object(l.b)();return Object(n.useEffect)((function(){var t;return j&&(d(0),b(""),N({type:"PRODUCT_REVIEW_SAVE_RESET"})),N(_?(t=e.match.params.id,function(){var e=Object(y.a)(h.a.mark((function e(a,n){var r,l,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PRODUCT_DETAILS_REQUEST",payload:t}),r=n(),l=r.userSignin.userInfo,e.next=5,S.a.get("/api/products/cache/"+t,{headers:{authorization:l.token}});case 5:c=e.sent,i=c.data,a({type:"PRODUCT_DETAILS_SUCCESS",payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"PRODUCT_DETAILS_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(y.a)(h.a.mark((function t(a,n){var r,l,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"PRODUCT_DETAILS_REQUEST",payload:e}),r=n(),r.userSignin.userInfo,t.next=5,S.a.get("/api/products/"+e);case 5:l=t.sent,c=l.data,a({type:"PRODUCT_DETAILS_SUCCESS",payload:c}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:"PRODUCT_DETAILS_FAIL",payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(e.match.params.id)),function(){}}),[j]),r.a.createElement("div",null,r.a.createElement("div",{className:"back-to-result"},r.a.createElement(u.b,{to:"/"},"Back to result")),I?r.a.createElement("div",null,"Loading..."):T?r.a.createElement("div",null,T," "):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"details"},r.a.createElement(U.Carousel,{width:"400px"},C.images&&C.images.map((function(e){return r.a.createElement("div",null,r.a.createElement("img",{src:e,alt:"product"}))}))),r.a.createElement("div",{className:"product"}),r.a.createElement("div",{className:"details-info"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("h4",null,C.name)),r.a.createElement("li",null,r.a.createElement("a",{href:"#reviews"},r.a.createElement(O,{value:C.rating,text:C.numReviews+" reviews"}))),r.a.createElement("li",null,"Price: ",r.a.createElement("b",null,"$",C.price)),r.a.createElement("li",null,"Points:",r.a.createElement("img",{src:m.a,height:"20",width:"20"}),r.a.createElement("b",null,C.points_price)),r.a.createElement("li",null,"Description:",r.a.createElement("div",null,C.description)))),r.a.createElement("div",{className:"details-action"},r.a.createElement("ul",null,r.a.createElement("li",null,"Price: ",C.price),r.a.createElement("li",null,"Status:"," ",C.countInStock>0?"In Stock":"Unavailable."),r.a.createElement("li",null,"Qty:"," ",r.a.createElement("select",{value:c,onChange:function(e){i(e.target.value)}},Object(D.a)(Array(C.countInStock).keys()).map((function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)})))),r.a.createElement("li",null,C.countInStock>0&&r.a.createElement("button",{onClick:function(){e.history.push("/cart/"+e.match.params.id+"?qty="+c)},className:"button primary"},"Add to Cart"))))),r.a.createElement("div",{className:"content-margined"},r.a.createElement("h2",null,"Reviews"),!C.reviews.length&&r.a.createElement("div",null,"There is no review"),r.a.createElement("ul",{className:"review",id:"reviews"},C.reviews.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",null,e.name),r.a.createElement("div",null,r.a.createElement(O,{value:e.rating})),r.a.createElement("div",null,e.createdAt.substring(0,10)),r.a.createElement("div",null,e.comment))})),r.a.createElement("li",null,r.a.createElement("h3",null,"Write a customer review"),_?r.a.createElement("form",{onSubmit:function(t){var a,n;t.preventDefault(),N((a=e.match.params.id,n={name:_.name,rating:p,comment:g},function(){var e=Object(y.a)(h.a.mark((function e(t,r){var l,c,i,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=r(),c=l.userSignin.userInfo.token,t({type:"PRODUCT_REVIEW_SAVE_REQUEST",payload:n}),e.next=5,S.a.post("/api/products/".concat(a,"/reviews"),n,{headers:{authorization:c}});case 5:i=e.sent,u=i.data,t({type:"PRODUCT_REVIEW_SAVE_SUCCESS",payload:u}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:"PRODUCT_REVIEW_SAVE_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"rating"},"Rating"),r.a.createElement(A.a,{count:5,onChange:function(e){d(e)},size:24,activeColor:"#FFB901"})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"comment"},"Comment"),r.a.createElement("textarea",{name:"comment",value:g,onChange:function(e){return b(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Submit")))):r.a.createElement("div",null,"Please ",r.a.createElement(u.b,{to:"/signin"},"Sign-in")," to write a review."))))))},P=a(16),w=a.n(P),L=function(e,t){return function(){var a=Object(y.a)(h.a.mark((function a(n,r){var l,c,i,u;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S.a.get("/api/products/"+e);case 3:l=a.sent,c=l.data,n({type:"CART_ADD_ITEM",payload:{product:c._id,name:c.name,images:c.images,price:c.price,points_price:c.points_price,countInStock:c.countInStock,qty:t}}),i=r(),u=i.cart.cartItems,w.a.set("cartItems",JSON.stringify(u)),a.next=12;break;case 10:a.prev=10,a.t0=a.catch(0);case 12:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()};var k=function(e){var t=Object(l.c)((function(e){return e.cart})).cartItems,a=e.match.params.id,c=e.location.search?Number(e.location.search.split("=")[1]):1,i=Object(l.b)(),o=function(e){i(function(e){return function(t,a){t({type:"CART_REMOVE_ITEM",payload:e});var n=a().cart.cartItems;w.a.set("cartItems",JSON.stringify(n))}}(e))};return Object(n.useEffect)((function(){a&&i(L(a,c))}),[]),r.a.createElement("div",{className:"cart"},r.a.createElement("div",{className:"cart-list"},r.a.createElement("ul",{className:"cart-list-container"},r.a.createElement("li",null,r.a.createElement("h3",null,"Shopping Cart"),r.a.createElement("div",null,"Price")),0===t.length?r.a.createElement("div",null,"Cart is empty"):t.map((function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"cart-image"},r.a.createElement("img",{src:e.images[0],alt:"product"})),r.a.createElement("div",{className:"cart-name"},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/product/"+e.product},e.name)),r.a.createElement("div",null,"Qty:",r.a.createElement("select",{value:e.qty,onChange:function(t){return i(L(e.product,t.target.value))}},Object(D.a)(Array(e.countInStock).keys()).map((function(e){return r.a.createElement("option",{key:e+1,value:e+1},e+1)}))),r.a.createElement("button",{type:"button",className:"button",onClick:function(){return o(e.product)}},"Delete"))),r.a.createElement("div",{className:"cart-price"},"$",e.price," ",r.a.createElement("br",null),r.a.createElement("img",{src:m.a,height:"20",width:"20"}),"  ",e.points_price))})))),r.a.createElement("div",{className:"cart-action"},r.a.createElement("h3",null,"Subtotal ( ",t.reduce((function(e,t){return Number(e)+Number(t.qty)}),0)," items) : $ ",t.reduce((function(e,t){return e+t.price*t.qty}),0)),r.a.createElement("h2",null,r.a.createElement("img",{src:m.a,height:"20",width:"20"})," ",t.reduce((function(e,t){return e+t.points_price*t.qty}),0)),r.a.createElement("button",{onClick:function(){e.history.push("/signin?redirect=shipping")},className:"button primary full-width",disabled:0===t.length},"Proceed to Checkout")))};var x=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(""),s=Object(f.a)(o,2),m=s[0],p=s[1],d=Object(l.c)((function(e){return e.userSignin})),E=d.loading,v=d.userInfo,g=d.error,b=Object(l.b)(),_=e.location.search?e.location.search.split("=")[1]:"/";return Object(n.useEffect)((function(){return v&&e.history.push(_),function(){}}),[v]),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b(function(e,t){return function(){var a=Object(y.a)(h.a.mark((function a(n){var r,l;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"USER_SIGNIN_REQUEST",payload:{email:e,password:t}}),a.prev=1,a.next=4,S.a.post("/api/users/signin",{email:e,password:t});case 4:r=a.sent,l=r.data,n({type:"USER_SIGNIN_SUCCESS",payload:l}),w.a.set("userInfo",JSON.stringify(l)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),n({type:"USER_SIGNIN_FAIL",payload:a.t0.response.data.message});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}(c,m))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("center",null,r.a.createElement("h2",null,"Sign-In"))),r.a.createElement("li",null,E&&r.a.createElement("div",null,"Loading..."),g&&r.a.createElement("div",null,g)),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){return i(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",onChange:function(e){return p(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Signin")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/"===_?"register":"register?redirect="+_,className:"button secondary text-center"},"Create your account")))))};var F=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(""),s=Object(f.a)(o,2),m=s[0],p=s[1],d=Object(n.useState)(""),E=Object(f.a)(d,2),v=E[0],g=E[1],b=Object(n.useState)(""),_=Object(f.a)(b,2),O=_[0],R=_[1],C=Object(l.c)((function(e){return e.userRegister})),I=C.loading,T=C.userInfo,D=C.error,U=Object(l.b)(),j=e.location.search?e.location.search.split("=")[1]:"/";return Object(n.useEffect)((function(){return T&&e.history.push(j),function(){}}),[T]),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),U(function(e,t,a,n){return function(){var r=Object(y.a)(h.a.mark((function r(l){var c,i;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l({type:"USER_REGISTER_REQUEST",payload:{name:e,email:t,password:a}}),r.prev=1,r.next=4,S.a.post("/api/users/register",{name:e,email:t,password:a,rePassword:n});case 4:c=r.sent,i=c.data,l({type:"USER_REGISTER_SUCCESS",payload:i}),w.a.set("userInfo",JSON.stringify(i)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),l({type:"USER_REGISTER_FAIL",payload:r.t0.response.data.message});case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()}(c,m,v,O))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("center",null,r.a.createElement("h2",null,"Create Account"))),r.a.createElement("li",null,I&&r.a.createElement("div",null,"Loading..."),D&&r.a.createElement("div",null,D)),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"name",name:"name",id:"name",onChange:function(e){return i(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){return p(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",onChange:function(e){return g(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"rePassword"},"Re-Enter Password"),r.a.createElement("input",{type:"password",id:"rePassword",name:"rePassword",onChange:function(e){return R(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Register")),r.a.createElement("li",null,"Already have an account?",r.a.createElement(u.b,{to:"/"===j?"signin":"signin?redirect="+j,className:"button secondary text-center"},"Create your account")))))};var M=function(e){var t=Object(n.useState)(!1),a=Object(f.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(""),o=Object(f.a)(u,2),s=o[0],m=o[1],p=Object(n.useState)(""),d=Object(f.a)(p,2),E=d[0],v=d[1],g=Object(n.useState)(""),_=Object(f.a)(g,2),O=_[0],R=_[1],C=Object(n.useState)(""),I=Object(f.a)(C,2),T=I[0],D=I[1],U=Object(n.useState)([]),j=Object(f.a)(U,2),A=j[0],N=j[1],P=Object(n.useState)(""),w=Object(f.a)(P,2),L=w[0],k=w[1],x=Object(n.useState)(""),F=Object(f.a)(x,2),M=F[0],Q=F[1],V=Object(n.useState)(""),Y=Object(f.a)(V,2),G=Y[0],z=Y[1],q=Object(n.useState)(""),J=Object(f.a)(q,2),$=J[0],B=J[1],H=Object(n.useState)(!1),W=Object(f.a)(H,2),K=W[0],X=W[1],Z=Object(l.c)((function(e){return e.productList})),ee=(Z.loading,Z.products),te=(Z.error,Object(l.c)((function(e){return e.productSave}))),ae=te.loading,ne=te.success,re=te.error,le=Object(l.c)((function(e){return e.productDelete})),ce=(le.loading,le.success),ie=(le.error,Object(l.b)());Object(n.useEffect)((function(){return ne&&i(!1),ie(b()),function(){}}),[ne,ce]);var ue=function(e){i(!0),m(e._id),v(e.name),R(e.price),D(e.points_price),B(e.description),N(e.images),k(e.brand),Q(e.category),z(e.countInStock)},oe=function(e){var t;ie((t=e._id,function(){var e=Object(y.a)(h.a.mark((function e(a,n){var r,l,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n(),l=r.userSignin.userInfo,a({type:"PRODUCT_DELETE_REQUEST",payload:t}),e.next=5,S.a.delete("/api/products/"+t,{headers:{authorization:l.token}});case 5:c=e.sent,i=c.data,a({type:"PRODUCT_DELETE_SUCCESS",payload:i,success:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"PRODUCT_DELETE_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()))};return r.a.createElement("div",{className:"content content-margined"},r.a.createElement("div",{className:"product-header"},r.a.createElement("h3",null,"Products"),r.a.createElement("button",{className:"button primary",onClick:function(){return ue({})}},"Create Product")),c&&r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),ie((t={_id:s,name:E,price:O,points:T,images:A,brand:L,category:M,countInStock:G,description:$},function(){var e=Object(y.a)(h.a.mark((function e(a,n){var r,l,c,i,u,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a({type:"PRODUCT_SAVE_REQUEST",payload:t}),r=n(),l=r.userSignin.userInfo,t._id){e.next=11;break}return e.next=6,S.a.post("/api/products",t,{headers:{authorization:l.token}});case 6:c=e.sent,i=c.data,a({type:"PRODUCT_SAVE_SUCCESS",payload:i}),e.next=16;break;case 11:return e.next=13,S.a.put("/api/products/"+t._id,t,{headers:{authorization:l.token}});case 13:u=e.sent,o=u.data,a({type:"PRODUCT_SAVE_SUCCESS",payload:o});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),a({type:"PRODUCT_SAVE_FAIL",payload:e.t0.message});case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,a){return e.apply(this,arguments)}}()))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"Create Product")),r.a.createElement("li",null,ae&&r.a.createElement("div",null,"Loading..."),re&&r.a.createElement("div",null,re)),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",value:E,id:"name",onChange:function(e){return v(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"text",name:"price",value:O,id:"price",onChange:function(e){return R(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"points"},"Points"),r.a.createElement("input",{type:"text",name:"points",value:T,id:"points",onChange:function(e){return D(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"image"},"Image"),r.a.createElement("input",{type:"text",name:"image",value:A,id:"image",onChange:function(e){return N(e.target.value)}}),r.a.createElement("input",{type:"file",multiple:!0,onChange:function(e){for(var t=e.target.files,a=new FormData,n=0;n<t.length;n++)a.append("Image".concat(n),t[n]);X(!0);var r=[];a.forEach((function(e){var t=new FormData;t.append("Image",e),S.a.post("/api/uploads/s3",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r.push(e.data),X(!1)})).catch((function(e){console.log("error"),X(!1)}))})),N(r)}}),K&&r.a.createElement("div",null,"Uploading...")),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"brand"},"Brand"),r.a.createElement("input",{type:"text",name:"brand",value:L,id:"brand",onChange:function(e){return k(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"countInStock"},"CountInStock"),r.a.createElement("input",{type:"text",name:"countInStock",value:G,id:"countInStock",onChange:function(e){return z(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Category"),r.a.createElement("input",{type:"text",name:"category",value:M,id:"category",onChange:function(e){return Q(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{name:"description",value:$,id:"description",onChange:function(e){return B(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},s?"Update":"Create")),r.a.createElement("li",null,r.a.createElement("button",{type:"button",onClick:function(){return i(!1)},className:"button secondary"},"Back"))))),r.a.createElement("div",{className:"product-list"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Brand"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,ee.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.brand),r.a.createElement("td",null,r.a.createElement("button",{className:"button",onClick:function(){return ue(e)}},"Edit")," ",r.a.createElement("button",{className:"button",onClick:function(){return oe(e)}},"Delete")))}))))))};var Q=function(e){return r.a.createElement("div",{className:"checkout-steps"},r.a.createElement("div",{className:e.step1?"active":""},"Signin"),r.a.createElement("div",{className:e.step2?"active":""},"Shipping"),r.a.createElement("div",{className:e.step3?"active":""},"Payment"),r.a.createElement("div",{className:e.step4?"active":""},"Place Order"))};var V=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(""),o=Object(f.a)(u,2),s=o[0],m=o[1],p=Object(n.useState)(""),d=Object(f.a)(p,2),E=d[0],v=d[1],h=Object(n.useState)(""),y=Object(f.a)(h,2),g=y[0],S=y[1],b=Object(l.b)();return r.a.createElement("div",null,r.a.createElement(Q,{step1:!0,step2:!0}),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(t){var a;t.preventDefault(),b((a={address:c,city:s,postalCode:E,country:g},function(e){e({type:"CART_SAVE_SHIPPING",payload:a})})),e.history.push("/payment")}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"Shipping")),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",name:"address",id:"address",onChange:function(e){return i(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("input",{type:"text",name:"city",id:"city",onChange:function(e){return m(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"postalCode"},"Postal Code"),r.a.createElement("input",{type:"text",name:"postalCode",id:"postalCode",onChange:function(e){return v(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"country"},"Country"),r.a.createElement("input",{type:"text",name:"country",id:"country",onChange:function(e){return S(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Continue"))))))};var Y=function(e){var t=Object(l.c)((function(e){return e.cart})).cartItems,a=Object(l.c)((function(e){return e.userSignin})).userInfo.points,c=Object(n.useState)(""),i=Object(f.a)(c,2),u=i[0],o=i[1],s=Object(l.b)();return r.a.createElement("div",null,r.a.createElement(Q,{step1:!0,step2:!0,step3:!0}),r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(t){var a;t.preventDefault(),s((a={paymentMethod:u},function(e){e({type:"CART_SAVE_PAYMENT",payload:a})})),e.history.push("/placeorder")}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"Payment")),r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"paymentMethod",id:"paymentMethod",value:"card",onChange:function(e){return o(e.target.value)}}),r.a.createElement("label",{for:"paymentMethod"},"Card"))),a>=t.reduce((function(e,t){return e+Number(t.points_price*t.qty)}),0)&&r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"paymentMethod",id:"pointsMethod",value:"points",onChange:function(e){return o(e.target.value)}}),r.a.createElement("label",{for:"pointsMethod"},"Points"))),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Continue"))))))};var G=function(e){var t=Object(l.c)((function(e){return e.cart})),a=Object(l.c)((function(e){return e.orderCreate})),c=(a.loading,a.success),i=(a.error,a.order),o=t.cartItems,s=t.shipping,p=t.payment;s.address?p.paymentMethod||e.history.push("/payment"):e.history.push("/shipping");var d="points"!=p.paymentMethod?o.reduce((function(e,t){return e+t.price*t.qty}),0):0,E="points"!=p.paymentMethod?d>1e3?0:10:o.reduce((function(e,t){return e+t.points_price*t.qty}),0)>1800?0:10,f="points"!=p.paymentMethod?.15*d:0,v="points"!=p.paymentMethod?d+E+f:E,g=Object(l.b)();return Object(n.useEffect)((function(){c&&(g({type:"ORDER_RESET"}),e.history.push("order/"+i._id))}),[c]),r.a.createElement("div",null,r.a.createElement(Q,{step1:!0,step2:!0,step3:!0,step4:!0}),r.a.createElement("div",{className:"placeorder"},r.a.createElement("div",{className:"placeorder-info"},r.a.createElement("div",null,r.a.createElement("h3",null,"Shipping"),r.a.createElement("div",null,t.shipping.address,", ",t.shipping.city,",",t.shipping.postalCode,", ",t.shipping.country,",")),r.a.createElement("div",null,r.a.createElement("h3",null,"Payment"),r.a.createElement("div",null,"Payment Method: ",t.payment.paymentMethod)),r.a.createElement("div",null,r.a.createElement("ul",{className:"cart-list-container"},r.a.createElement("li",null,r.a.createElement("h3",null,"Shopping Cart"),r.a.createElement("div",null,"Price")),0===o.length?r.a.createElement("div",null,"Cart is empty"):o.map((function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"cart-image"},r.a.createElement("img",{src:e.images[0],alt:"product"})),r.a.createElement("div",{className:"cart-name"},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/product/"+e.product},e.name)),r.a.createElement("div",null,"Qty: ",e.qty)),r.a.createElement("div",{className:"cart-price"},"$",e.price,r.a.createElement("br",null),r.a.createElement("img",{src:m.a,height:"20",width:"20"}),"  ",e.points_price))}))))),r.a.createElement("div",{className:"placeorder-action"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{className:"button primary full-width",onClick:function(){var e=p.paymentMethod;g(function(e){return function(){var t=Object(y.a)(h.a.mark((function t(a,n){var r,l,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"ORDER_CREATE_REQUEST",payload:e}),r=n(),l=r.userSignin.userInfo,t.next=5,S.a.post("/api/orders",e,{headers:{authorization:l.token}});case 5:c=t.sent,i=c.data.data,a({type:"ORDER_CREATE_SUCCESS",payload:i}),a((function(e){e({type:"CART_RESET"})})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"ORDER_CREATE_FAIL",payload:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}({orderItems:o,shipping:s,pay:e,itemsPrice:d,shippingPrice:E,taxPrice:f,totalPrice:v}))}},"Place Order")),r.a.createElement("li",null,r.a.createElement("h3",null,"Order Summary")),r.a.createElement("li",null,r.a.createElement("div",null,"Items"),r.a.createElement("div",null,"$",d)),r.a.createElement("li",null,r.a.createElement("div",null,"Shipping"),r.a.createElement("div",null,"$",E)),r.a.createElement("li",null,r.a.createElement("div",null,"Tax"),r.a.createElement("div",null,"$",f)),r.a.createElement("li",null,r.a.createElement("div",null,"Order Total"),"points"!=p.paymentMethod&&r.a.createElement("div",null,"$",v),"points"==p.paymentMethod&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,o.reduce((function(e,t){return e+t.points_price*t.qty}),0)),r.a.createElement("img",{src:m.a,height:"20",width:"20",style:{margin:"1"}}),r.a.createElement("div",null,"+ $ ",E)))))))},z=a(9),q=a(49),J=a.n(q);var $=function(e){Object(n.useEffect)((function(){console.log(e.order)}),[]);var t=Object(l.c)((function(e){return e.userSignin})).userInfo,a=Object(n.useState)({price:parseInt(e.order.totalPrice),shipping:e.order.shipping}),c=Object(f.a)(a,2),i=c[0],u=(c[1],Object(n.useState)({id:t._id,email:t.email})),o=Object(f.a)(u,2),s=o[0],m=(o[1],function(){var t=Object(y.a)(h.a.mark((function t(){var a,n,r,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={product:i,token:s},t.prev=1,t.next=4,S.a.post("/api/payment",a);case 4:return n=t.sent,r=n.data,l={payerID:s.id,orderID:e.order._id,paymentID:r.id},e.pay(l),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(1),console.log("response",t.t0.response,"status",t.t0.response.status);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}());return r.a.createElement(J.a,{currency:"USD",amount:100*i.price,name:"Stripe",token:m,stripeKey:"pk_test_51J5pbGAJx5tuHbI4hJuzouvJy87Ok9Enu1rks5ETwJevsdZimG30PtiJ2iQyjpBu5LGwkkvxjG5LuXZFTRuoIAGI00dF6LJrAu"},r.a.createElement("button",{type:"button",className:"button primary"},"Pay with Card "))};var B=function(e){var t=Object(l.c)((function(e){return e.userSignin})).userInfo,a=Object(l.c)((function(e){return e.orderDetails})),c=a.loading,i=a.order,o=a.error,s=Object(l.c)((function(e){return e.orderPay})),p=s.loading,d=s.success,E=s.error,f=Object(l.b)();Object(n.useEffect)((function(){var t;return d?(f({type:"ORDER_PAY_RESET"}),e.history.push("/profile")):f((t=e.match.params.id,function(){var e=Object(y.a)(h.a.mark((function e(a,n){var r,l,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"ORDER_DETAILS_REQUEST",payload:t}),r=n(),l=r.userSignin.userInfo,e.next=5,S.a.get("/api/orders/"+t,{headers:{authorization:l.token}});case 5:c=e.sent,i=c.data,a({type:"ORDER_DETAILS_SUCCESS",payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"ORDER_DETAILS_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())),function(){}}),[d]);var v=function(e){if("card"==i.payment.paymentMethod){var t=Math.round(27*i.orderItems.reduce((function(e,t){return e+Number(t.price*t.qty)}),0)/100);console.log(t),f({type:"USER_INCREMENT_POINTS",payload:t}),f(function(e,t){return function(){var a=Object(y.a)(h.a.mark((function a(n,r){var l,c,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"ORDER_PAY_REQUEST"}),l=r(),c=l.userSignin.userInfo,a.next=5,S.a.put("/api/orders/"+e._id+"/pay",t,{headers:{authorization:c.token}});case 5:i=a.sent,i.data,n({type:"ORDER_PAY_SUCCESS",payload:{orderItems:e.orderItems,shipping:e.shipping,paymentResult:t}}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),n({type:"ORDER_PAY_FAIL",payload:a.t0.message});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()}(i,e))}else if("points"==i.payment.paymentMethod){var a=i.orderItems.reduce((function(e,t){return e+Number(t.points_price*t.qty)}),0);f({type:"USER_DECREMENT_POINTS",payload:a}),f(function(e,t){return function(){var a=Object(y.a)(h.a.mark((function a(n,r){var l,c,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"ORDER_PAY_REQUEST"}),l=r(),c=l.userSignin.userInfo,a.next=5,S.a.put("/api/orders/"+e._id+"/payShipping",t,{headers:{authorization:c.token}});case 5:i=a.sent,i.data,n({type:"ORDER_PAY_SUCCESS",payload:{orderItems:e.orderItems,shipping:e.shipping,paymentResult:t}}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),n({type:"ORDER_PAY_FAIL",payload:a.t0.message});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()}(i,Object(z.a)(Object(z.a)({},e),{},{pointsProducts:a})))}f((function(e){e({type:"CART_RESET"})}))};return c?r.a.createElement("div",null,"Loading ..."):o?r.a.createElement("div",null,o):r.a.createElement("div",null,r.a.createElement("div",{className:"placeorder"},r.a.createElement("div",{className:"placeorder-info"},r.a.createElement("div",null,r.a.createElement("h3",null,"Shipping"),r.a.createElement("div",null,i.shipping.address,", ",i.shipping.city,",",i.shipping.postalCode,", ",i.shipping.country,","),r.a.createElement("div",null,i.isDelivered?"Delivered at "+i.deliveredAt:"Not Delivered.")),r.a.createElement("div",null,r.a.createElement("h3",null,"Payment"),r.a.createElement("div",null,"Payment Method: ",i.payment.paymentMethod),r.a.createElement("div",null,i.isPaid?"Paid at "+i.paidAt:"Not Paid.")),r.a.createElement("div",null,r.a.createElement("ul",{className:"cart-list-container"},r.a.createElement("li",null,r.a.createElement("h3",null,"Shopping Cart"),r.a.createElement("div",null,"Price")),0===i.orderItems.length?r.a.createElement("div",null,"Cart is empty"):i.orderItems.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",{className:"cart-image"},r.a.createElement("img",{src:e.images[0],alt:"product"})),r.a.createElement("div",{className:"cart-name"},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/product/"+e.product},e.name)),r.a.createElement("div",null,"Qty: ",e.qty)),r.a.createElement("div",{className:"cart-price"},"$",e.price,r.a.createElement("br",null),r.a.createElement("img",{src:m.a,height:"20",width:"20"}),"  ",e.points_price))}))))),r.a.createElement("div",{className:"placeorder-action"},r.a.createElement("ul",null,r.a.createElement("li",{className:"placeorder-actions-payment"},p&&r.a.createElement("div",null,"Finishing Payment..."),E&&r.a.createElement("div",null,"error Payment !"),!i.isPaid&&"card"==i.payment.paymentMethod&&i.totalPrice<=999999.99&&r.a.createElement($,{order:i,pay:v}),!i.isPaid&&"points"==i.payment.paymentMethod&&0==i.shippingPrice&&r.a.createElement("button",{className:"button primary full-width",onClick:function(){var e=i.orderItems.reduce((function(e,t){return e+Number(t.points_price*t.qty)}),0),a={payerID:t._id,orderID:i._id,paymentID:t._id+"-"+t.points,points:e};f(function(e,t){return function(){var a=Object(y.a)(h.a.mark((function a(n,r){var l,c,i;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"ORDER_PAY_REQUEST"}),l=r(),c=l.userSignin.userInfo,a.next=5,S.a.put("/api/orders/"+e._id+"/payByPoints",t,{headers:{authorization:c.token}});case 5:i=a.sent,i.data,n({type:"ORDER_PAY_SUCCESS",payload:{orderItems:e.orderItems,shipping:e.shipping,paymentResult:t}}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),n({type:"ORDER_PAY_FAIL",payload:a.t0.message});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}()}(i,a)),f({type:"USER_DECREMENT_POINTS",payload:e}),f((function(e){e({type:"CART_RESET"})}))}},"PAY"),!i.isPaid&&"card"==i.payment.paymentMethod&&i.totalPrice>999999.99&&r.a.createElement("button",{className:"button primary full-width"},"Amount more than $999,999.99 "),!i.isPaid&&"points"==i.payment.paymentMethod&&0!=i.shippingPrice&&r.a.createElement($,{pay:v,order:i})),r.a.createElement("li",null,r.a.createElement("h3",null,"Order Summary")),r.a.createElement("li",null,r.a.createElement("div",null,"Items"),r.a.createElement("div",null,"$",i.itemsPrice)),r.a.createElement("li",null,r.a.createElement("div",null,"Shipping"),r.a.createElement("div",null,"$",i.shippingPrice)),r.a.createElement("li",null,r.a.createElement("div",null,"Tax"),r.a.createElement("div",null,"$",i.taxPrice)),r.a.createElement("li",null,r.a.createElement("div",null,"Order Total"),r.a.createElement("div",null,"$",i.totalPrice))))))};var H=function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(""),s=Object(f.a)(o,2),m=s[0],p=s[1],d=Object(n.useState)(""),E=Object(f.a)(d,2),v=E[0],g=E[1],b=Object(l.b)(),_=Object(l.c)((function(e){return e.userSignin})),O=_.userInfo,R=_.loadingClear,C=Object(l.c)((function(e){return e.userUpdate})),I=C.loading,T=C.success,D=C.error,U=Object(l.c)((function(e){return e.myOrderList})),j=U.loading,A=U.orders,N=U.error;return Object(n.useEffect)((function(){return O&&(g(O.email),i(O.name),p(O.password)),b(function(){var e=Object(y.a)(h.a.mark((function e(t,a){var n,r,l,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"MY_ORDER_LIST_REQUEST"}),n=a(),r=n.userSignin.userInfo,e.next=5,S.a.get("/api/orders/mine",{headers:{authorization:r.token}});case 5:l=e.sent,c=l.data,t({type:"MY_ORDER_LIST_SUCCESS",payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:"MY_ORDER_LIST_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()),function(){}}),[O]),r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile-info"},r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b(function(e){var t=e.userId,a=e.name,n=e.email,r=e.password;return function(){var e=Object(y.a)(h.a.mark((function e(l,c){var i,u,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c(),u=i.userSignin.userInfo,l({type:"USER_UPDATE_REQUEST",payload:{userId:t,name:a,email:n,password:r}}),e.prev=2,e.next=5,S.a.put("/api/users/"+t,{name:a,email:n,password:r},{headers:{authorization:u.token}});case 5:o=e.sent,s=o.data,l({type:"USER_UPDATE_SUCCESS",payload:s}),w.a.set("userInfo",JSON.stringify(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),l({type:"USER_UPDATE_FAIL",payload:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}()}({userId:O._id,email:v,name:c,password:m}))}},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h2",null,"User Profile")),r.a.createElement("li",null,R&&r.a.createElement("div",null,"Clearing cache ..."),I&&r.a.createElement("div",null,"Loading..."),D&&r.a.createElement("div",null,D),T&&r.a.createElement("div",null,"Profile Saved Successfully.")),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{value:c,type:"name",name:"name",id:"name",onChange:function(e){return i(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{value:v,type:"email",name:"email",id:"email",onChange:function(e){return g(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{value:m,type:"password",id:"password",name:"password",onChange:function(e){return p(e.target.value)}})),r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"button primary"},"Update")),r.a.createElement("li",null,r.a.createElement("button",{type:"button",onClick:function(){var e;b((e=O.token,function(){var t=Object(y.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n().userSignin.userInfo,a({type:"USER_CLEAR_CACHE_REQUEST"}),t.prev=2,t.next=5,S.a.put("/api/users/clearcache/",{},{headers:{authorization:e}});case 5:t.sent.data,a({type:"USER_CLEAR_CACHE_SUCCESS"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:"USER_CLEAR_CACHE_ERROR"});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,a){return t.apply(this,arguments)}}()))},className:"button primary"},"Clear Cache")),r.a.createElement("li",null,r.a.createElement("button",{type:"button",onClick:function(){b((function(e){w.a.remove("userInfo"),e({type:"USER_LOGOUT"})})),b((function(e){e({type:"CART_RESET"})})),e.history.push("/signin")},className:"button secondary full-width"},"Logout")))))),r.a.createElement("div",{className:"profile-orders content-margined"},j?r.a.createElement("div",null,"Loading..."):N?r.a.createElement("div",null,N," "):r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"DATE"),r.a.createElement("th",null,"TOTAL"),r.a.createElement("th",null,"PAID"),r.a.createElement("th",null,"ACTIONS"))),r.a.createElement("tbody",null,A.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.createdAt),r.a.createElement("td",null,e.totalPrice),r.a.createElement("td",null,e.isPaid.toString()),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/order/"+e._id},"DETAILS")))}))))))};var W=function(e){var t=Object(l.c)((function(e){return e.orderList})),a=t.loading,c=t.orders,i=(t.error,Object(l.c)((function(e){return e.orderDelete}))),o=(i.loading,i.success),s=(i.error,Object(l.b)());Object(n.useEffect)((function(){return s(function(){var e=Object(y.a)(h.a.mark((function e(t,a){var n,r,l,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"ORDER_LIST_REQUEST"}),n=a(),r=n.userSignin.userInfo,e.next=5,S.a.get("/api/orders",{headers:{authorization:r.token}});case 5:l=e.sent,c=l.data,t({type:"ORDER_LIST_SUCCESS",payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:"ORDER_LIST_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()),function(){}}),[o]);var m=function(e){var t;s((t=e._id,function(){var e=Object(y.a)(h.a.mark((function e(a,n){var r,l,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"ORDER_DELETE_REQUEST",payload:t}),r=n(),l=r.userSignin.userInfo,e.next=5,S.a.delete("/api/orders/"+t,{headers:{authorization:l.token}});case 5:c=e.sent,i=c.data,a({type:"ORDER_DELETE_SUCCESS",payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a({type:"ORDER_DELETE_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()))};return a?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"content content-margined"},r.a.createElement("div",{className:"order-header"},r.a.createElement("h3",null,"Orders")),r.a.createElement("div",{className:"order-list"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"DATE"),r.a.createElement("th",null,"TOTAL"),r.a.createElement("th",null,"USER"),r.a.createElement("th",null,"PAID"),r.a.createElement("th",null,"PAID AT"),r.a.createElement("th",null,"DELIVERED"),r.a.createElement("th",null,"DELIVERED AT"),r.a.createElement("th",null,"ACTIONS"))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.createdAt),r.a.createElement("td",null,e.totalPrice),r.a.createElement("td",null,e.user.name),r.a.createElement("td",null,e.isPaid.toString()),r.a.createElement("td",null,e.paidAt),r.a.createElement("td",null,e.isDelivered.toString()),r.a.createElement("td",null,e.deliveredAt),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/order/"+e._id,className:"button secondary"},"Details")," ",r.a.createElement("button",{type:"button",onClick:function(){return m(e)},className:"button secondary"},"Delete")))}))))))},K=function(){return function(){var e=Object(y.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"CATEGORY_LIST_REQUEST"}),e.next=4,S.a.get("/api/products/categories");case 4:a=e.sent,n=a.data,t({type:"CATEGORY_LIST_SUCCESS",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:"CATEGORY_LIST_FAIL",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()};var X=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.categories})),a=(t.loading,t.categories);return Object(n.useEffect)((function(){return e(K()),function(){}}),[]),r.a.createElement(u.a,null,r.a.createElement("div",{className:"grid-container"},r.a.createElement(p,null),r.a.createElement("aside",{className:"sidebar"},r.a.createElement("h3",null,"Shopping Categories"),r.a.createElement("button",{className:"sidebar-close-button",onClick:function(){document.querySelector(".sidebar").classList.remove("open")}},"x"),r.a.createElement("ul",{className:"categories"},a&&a.map((function(e){return r.a.createElement("li",null,r.a.createElement(u.b,{to:"/category/".concat(e)},e))})))),r.a.createElement("main",{className:"main"},r.a.createElement("div",{className:"content"},r.a.createElement(E,{path:"/orders",component:W}),r.a.createElement(E,{path:"/profile",component:H}),r.a.createElement(E,{path:"/order/:id",component:B}),r.a.createElement(E,{path:"/products",component:M}),r.a.createElement(E,{path:"/shipping",component:V}),r.a.createElement(E,{path:"/payment",component:Y}),r.a.createElement(E,{path:"/placeorder",component:G}),r.a.createElement(o.b,{path:"/signin",component:x}),r.a.createElement(o.b,{path:"/register",component:F}),r.a.createElement(o.b,{path:"/product/:id",component:N}),r.a.createElement(o.b,{path:"/cart/:id?",component:k}),r.a.createElement(o.b,{path:"/category/:id",component:T}),r.a.createElement(o.b,{path:"/",exact:!0,component:T}))),r.a.createElement("footer",{className:"footer"},"E-commerce 2020-2021")))},Z=a(19),ee=a(50);var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{categories:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CATEGORY_LIST_REQUEST":return{loading:!0};case"CATEGORY_LIST_SUCCESS":return{loading:!1,categories:t.payload};case"CATEGORY_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},ae={cart:{cartItems:w.a.getJSON("cartItems")||[],shipping:{},payment:{}},userSignin:{userInfo:w.a.getJSON("userInfo")||null},categories:{categories:[],loading:!1},topProducts:{products:[],loading:!1}},ne=Object(Z.c)({topProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_TOP_REQUEST":return{loading:!0};case"PRODUCT_LIST_TOP_SUCCESS":return{products:t.payload,loading:!1};case"PRODUCT_LIST_TOP_FAIL":return{loading:!1,error:t.payload.error};default:return e}},categories:te,productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_REQUEST":return{loading:!0,products:[]};case"PRODUCT_LIST_SUCCESS":return{loading:!1,products:t.payload};case"PRODUCT_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DETAILS_REQUEST":return{loading:!0};case"PRODUCT_DETAILS_SUCCESS":return{loading:!1,product:t.payload};case"PRODUCT_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shipping:{},payment:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_ADD_ITEM":var a=t.payload,n=e.cartItems.find((function(e){return e.product===a.product}));return n?{cartItems:e.cartItems.map((function(e){return e.product===n.product?a:e}))}:{cartItems:[].concat(Object(D.a)(e.cartItems),[a])};case"CART_REMOVE_ITEM":return{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))};case"CART_SAVE_SHIPPING":return Object(z.a)(Object(z.a)({},e),{},{shipping:t.payload});case"CART_SAVE_PAYMENT":return Object(z.a)(Object(z.a)({},e),{},{payment:t.payload});case"CART_RESET":return{cartItems:[],shipping:{},payment:{}};default:return e}},userSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SIGNIN_REQUEST":return{loading:!0};case"USER_SIGNIN_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_SIGNIN_FAIL":return{loading:!1,error:t.payload};case"USER_DECREMENT_POINTS":return{loading:!1,userInfo:Object(z.a)(Object(z.a)({},e.userInfo),{},{points:e.userInfo.points-t.payload})};case"USER_INCREMENT_POINTS":return{loading:!1,userInfo:Object(z.a)(Object(z.a)({},e.userInfo),{},{points:e.userInfo.points+t.payload})};case"USER_CLEAR_CACHE_REQUEST":return{loadingClear:!0,userInfo:Object(z.a)({},e.userInfo)};case"USER_CLEAR_CACHE_SUCCESS":return{loadingClear:!1,userInfo:Object(z.a)({},e.userInfo)};case"USER_LOGOUT":return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER_REQUEST":return{loading:!0};case"USER_REGISTER_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_REGISTER_FAIL":return{loading:!1,error:t.payload};default:return e}},productSave:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_SAVE_REQUEST":return{loading:!0};case"PRODUCT_SAVE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"PRODUCT_SAVE_FAIL":return{loading:!1,error:t.payload};default:return e}},productDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DELETE_REQUEST":return{loading:!0};case"PRODUCT_DELETE_SUCCESS":return{loading:!1,product:t.payload,success:!0};case"PRODUCT_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},productReviewSave:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_REVIEW_SAVE_REQUEST":return{loading:!0};case"PRODUCT_REVIEW_SAVE_SUCCESS":return{loading:!1,review:t.payload,success:!0};case"PRODUCT_REVIEW_SAVE_FAIL":return{loading:!1,errror:t.payload};case"PRODUCT_REVIEW_SAVE_RESET":return{};default:return e}},orderCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_CREATE_REQUEST":return{loading:!0};case"ORDER_CREATE_SUCCESS":return{loading:!1,order:t.payload,success:!0};case"ORDER_CREATE_FAIL":return{loading:!1,error:t.payload};case"ORDER_RESET":return Object(z.a)(Object(z.a)({},e.order),{},{loading:!1,success:!1});default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order:{orderItems:[],shipping:{},payment:{}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_DETAILS_REQUEST":return{loading:!0};case"ORDER_DETAILS_SUCCESS":return{loading:!1,order:t.payload};case"ORDER_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},orderPay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order:{orderItems:[],shipping:{},payment:{}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_PAY_REQUEST":return{loading:!0};case"ORDER_PAY_SUCCESS":return{loading:!1,success:!0,order:{orderItems:t.payload.orderItems,shipping:t.payload.shipping,payment:t.payload.paymentResult}};case"ORDER_PAY_FAIL":return{loading:!1,error:t.payload};case"ORDER_PAY_RESET":return{loading:!1,success:!1};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_UPDATE_REQUEST":return{loading:!0};case"USER_UPDATE_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_UPDATE_FAIL":return{loading:!1,error:t.payload};default:return e}},myOrderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MY_ORDER_LIST_REQUEST":return{loading:!0};case"MY_ORDER_LIST_SUCCESS":return{loading:!1,orders:t.payload};case"MY_ORDER_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},orderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_LIST_REQUEST":return{loading:!0};case"ORDER_LIST_SUCCESS":return{loading:!1,orders:t.payload};case"ORDER_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},orderDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order:{orderItems:[],shipping:{},payment:{}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_DELETE_REQUEST":return{loading:!0};case"ORDER_DELETE_SUCCESS":return{loading:!1,success:!0};case"ORDER_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}}}),re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Z.d,le=Object(Z.e)(ne,ae,re(Object(Z.a)(ee.a)));i.a.render(r.a.createElement(l.a,{store:le},r.a.createElement(X,null)),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.7bbc0805.chunk.js.map